<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>Hâ‚‚Oâ‚‚ Câ‚‚ æ—‹è½¬æ¼”ç¤º</title>
  <!-- å¼•å…¥ NGL Viewer -->
  <script src="https://cdn.jsdelivr.net/npm/ngl@2.0.0/dist/ngl.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    #viewport { width: 100vw; height: 100vh; }
    #controls {
      position: absolute;
      top: 20px;
      left: 20px;
      background: white;
      padding: 10px;
      border-radius: 5px;
      font-family: Arial;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <!-- 3D æ¸²æŸ“å®¹å™¨ -->
  <div id="viewport"></div>
  <!-- æ§åˆ¶æŒ‰é’® -->
  <div id="controls">
    <button onclick="rotateC2()">æ‰§è¡Œ Câ‚‚ æ—‹è½¬ (180Â°)</button>
  </div>

  <script>
    // åˆå§‹åŒ– NGL Stage
    const stage = new NGL.Stage("viewport");

    // åŠ è½½ GitHub ä¸Šçš„ h2o2.sdf æ–‡ä»¶
    const sdfUrl = "https://uuytfvhjj.github.io/sss/h2o2.sdf";

    stage.loadFile(sdfUrl)
      .then(function (component) {
        // æ·»åŠ çƒæ£æ¨¡å‹
        component.addRepresentation("ball+stick", {
          radiusScale: 0.2,
          aspectRatio: 1.5
        });
        // è‡ªåŠ¨è°ƒæ•´è§†è§’
        stage.autoView();
        // ä¿å­˜å¼•ç”¨ï¼Œä¾›æ—‹è½¬ä½¿ç”¨
        window.mol = component;
        console.log("âœ… Hâ‚‚Oâ‚‚ åˆ†å­åŠ è½½æˆåŠŸï¼");
      })
      .catch(function (error) {
        console.error("âŒ åŠ è½½å¤±è´¥:", error);
        alert("åˆ†å­åŠ è½½å¤±è´¥ï¼è¯·æ£€æŸ¥ h2o2.sdf æ˜¯å¦å­˜åœ¨ã€‚");
      });

    // Câ‚‚ æ—‹è½¬å‡½æ•°ï¼ˆç»• Z è½´ 180Â°ï¼‰
    function rotateC2() {
      if (!window.mol) {
        alert("åˆ†å­æœªåŠ è½½å®Œæˆï¼");
        return;
      }
      const m = window.mol.matrix.clone();
      // æ„é€  180Â° ç»• Z è½´çš„æ—‹è½¬çŸ©é˜µ
      const rot180 = new NGL.Matrix4().set(
        -1,  0, 0, 0,
         0, -1, 0, 0,
         0,  0, 1, 0,
         0,  0, 0, 1
      );
      m.multiply(rot180);
      window.mol.setMatrix(m);
      console.log("ğŸ”„ æ‰§è¡Œ Câ‚‚ å¯¹ç§°æ“ä½œ");
    }
  </script>
</body>
</html>
